[{"filePath":"c:\\Users\\bhuva\\OneDrive\\Desktop\\catalyst\\my-react-app\\src\\components\\Layout\\TopBar.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"c:\\Users\\bhuva\\OneDrive\\Desktop\\catalyst\\my-react-app\\src\\pages\\Vendor\\VendorDetails.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Toast' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'toast' is assigned a value but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'filteredRejectedVendors' is assigned a value but never used.","line":71,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiPlus, FiRefreshCw, FiSearch } from 'react-icons/fi';\nimport Toast from '../../components/Toast/Toast';\nimport './VendorDetails.css';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000';\n\nconst VendorDetails = () => {\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('accepted');\n  const [businessNameFilter, setBusinessNameFilter] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n  const [dateRange, setDateRange] = useState({ from: '', to: '' });\n  const [acceptedVendors, setAcceptedVendors] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [toast, setToast] = useState(null);\n\n  const categories = ['Catering', 'Decoration', 'Photography', 'Music', 'Videography', 'Entertainment', 'Flowers', 'Other'];\n\n  const fetchAcceptedVendors = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`${API_BASE_URL}/api/vendors/accepted`);\n      if (!response.ok) {\n        throw new Error('Failed to load accepted vendors');\n      }\n      const result = await response.json();\n      if (Array.isArray(result.data)) {\n        setAcceptedVendors(result.data);\n      } else {\n        setAcceptedVendors([]);\n      }\n    } catch (error) {\n      setAcceptedVendors([]);\n      setToast({ message: error.message || 'Failed to load accepted vendors', type: 'error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAcceptedVendors();\n  }, []);\n\n  const filterVendors = useMemo(\n    () => (vendors) => {\n      return vendors.filter((vendor) => {\n        const matchesBusinessName = (vendor.businessName || '')\n          .toLowerCase()\n          .includes(businessNameFilter.toLowerCase());\n        const matchesCategory =\n          categoryFilter === '' || (vendor.category || '').toLowerCase() === categoryFilter.toLowerCase();\n\n        let matchesDate = true;\n        if (dateRange.from) {\n          matchesDate = matchesDate && new Date(vendor.createdAt) >= new Date(dateRange.from);\n        }\n        if (dateRange.to) {\n          matchesDate = matchesDate && new Date(vendor.createdAt) <= new Date(dateRange.to);\n        }\n\n        return matchesBusinessName && matchesCategory && matchesDate;\n      });\n    },\n    [businessNameFilter, categoryFilter, dateRange.from, dateRange.to]\n  );\n\n  const filteredAcceptedVendors = filterVendors(acceptedVendors);\n  const filteredRejectedVendors = [];\n\n  const handleResetFilters = () => {\n    setBusinessNameFilter('');\n    setCategoryFilter('');\n    setDateFilter('');\n    setDateRange({ from: '', to: '' });\n  };\n\n  const handleRefresh = () => {\n    fetchAcceptedVendors();\n  };\n\n  const handleViewDetails = (vendor) => {\n    navigate(`/vendor/details/accepted/${vendor.id}`, { state: { vendor } });\n  };\n\n  return (\n    <div className=\"vendor-details-container\">\n      {/* Header Section */}\n      <div className=\"vendor-details-header\">\n        <div className=\"header-left\">\n          <h1>Vendor Details</h1>\n        </div>\n        <div className=\"header-actions\">\n          <button className=\"refresh-btn\" onClick={handleRefresh} disabled={loading}>\n            <FiRefreshCw size={18} className={loading ? 'spin' : ''} />\n            Refresh\n          </button>\n          <button\n            className=\"create-vendor-btn\"\n            onClick={() => navigate('/vendor/create')}\n          >\n            <FiPlus size={20} />\n            Create Vendor\n          </button>\n        </div>\n      </div>\n\n      {/* Filters Section */}\n      <div className=\"filters-section\">\n        <div className=\"filter-group\">\n          <button\n            className={`date-filter-btn ${dateFilter === 'week' ? 'active' : ''}`}\n            onClick={() => setDateFilter('week')}\n          >\n            Week\n          </button>\n          <button\n            className={`date-filter-btn ${dateFilter === 'month' ? 'active' : ''}`}\n            onClick={() => setDateFilter('month')}\n          >\n            Month\n          </button>\n          <button\n            className={`date-filter-btn ${dateFilter === 'year' ? 'active' : ''}`}\n            onClick={() => setDateFilter('year')}\n          >\n            Year\n          </button>\n        </div>\n\n        <div className=\"filter-group\">\n          <div className=\"date-range-inputs\">\n            <input\n              type=\"date\"\n              placeholder=\"From\"\n              value={dateRange.from}\n              onChange={(e) =>\n                setDateRange({ ...dateRange, from: e.target.value })\n              }\n              title=\"Select custom date range\"\n            />\n            <span>to</span>\n            <input\n              type=\"date\"\n              placeholder=\"To\"\n              value={dateRange.to}\n              onChange={(e) =>\n                setDateRange({ ...dateRange, to: e.target.value })\n              }\n              title=\"Select custom date range\"\n            />\n          </div>\n        </div>\n\n        <div className=\"filter-group\">\n          <select\n            className=\"category-dropdown\"\n            value={categoryFilter}\n            onChange={(e) => setCategoryFilter(e.target.value)}\n          >\n            <option value=\"\">All Categories</option>\n            {categories.map((cat) => (\n              <option key={cat} value={cat}>\n                {cat}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"filter-group\">\n          <div className=\"search-input-wrapper\">\n            <FiSearch size={18} className=\"search-icon\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by Business Name\"\n              value={businessNameFilter}\n              onChange={(e) => setBusinessNameFilter(e.target.value)}\n              className=\"search-input\"\n            />\n          </div>\n        </div>\n\n        <button className=\"reset-filters-btn\" onClick={handleResetFilters}>\n          Reset\n        </button>\n      </div>\n\n      {/* Tabs Section */}\n      <div className=\"tabs-section\">\n        <button\n          className={`tab ${activeTab === 'accepted' ? 'active' : ''}`}\n          onClick={() => setActiveTab('accepted')}\n        >\n          Accepted Vendors ({filteredAcceptedVendors.length})\n        </button>\n      </div>\n\n      {/* Tables Section */}\n      <div className=\"table-container\">\n        <div className=\"vendors-table-wrapper\">\n          {loading ? (\n            <div className=\"table-loading\">Loading accepted vendors...</div>\n          ) : filteredAcceptedVendors.length > 0 ? (\n            <table className=\"vendors-table\">\n              <thead>\n                <tr>\n                  <th>Business Name</th>\n                  <th>Category</th>\n                  <th>Email</th>\n                  <th>Phone Number</th>\n                  <th>Status</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredAcceptedVendors.map((vendor) => (\n                  <tr key={vendor.id}>\n                    <td>\n                      <div className=\"vendor-info\">\n                        <span className=\"vendor-name\">{vendor.businessName}</span>\n                        <span className=\"vendor-city\">{vendor.city || '‚Äî'}</span>\n                      </div>\n                    </td>\n                    <td>\n                      <span className=\"category-badge\">{vendor.category || '‚Äî'}</span>\n                    </td>\n                    <td>{vendor.email || '‚Äî'}</td>\n                    <td>{vendor.phone || '‚Äî'}</td>\n                    <td>\n                      <span className={`status-chip ${vendor.status}`}>{vendor.status?.charAt(0).toUpperCase() + vendor.status?.slice(1)}</span>\n                    </td>\n                    <td>\n                      <button\n                        className=\"view-details-btn\"\n                        onClick={() => handleViewDetails(vendor)}\n                      >\n                        View Details\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          ) : (\n            <div className=\"no-data-message\">No accepted vendors found</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VendorDetails;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"c:\\Users\\bhuva\\OneDrive\\Desktop\\catalyst\\my-react-app\\src\\pages\\Vendor\\VendorRequest.js","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: Identifier 'showToast' has already been declared. (202:8)","line":202,"column":8,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { MdStore } from \"react-icons/md\";\nimport { FiPlus, FiEye, FiCheck, FiX, FiLoader } from \"react-icons/fi\";\nimport Toast from '../../components/Toast/Toast';\nimport './VendorRequest.css';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000';\n\nconst VendorRequest = () => {\n  const navigate = useNavigate();\n  const [searchBusiness, setSearchBusiness] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('All Categories');\n  const [toast, setToast] = useState(null);\n  const [approveModal, setApproveModal] = useState(null);\n  const [rejectModal, setRejectModal] = useState(null);\n  const [rejectionReason, setRejectionReason] = useState('');\n  const [vendorRequests, setVendorRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const categories = ['All Categories', 'Catering', 'Photography', 'Decoration', 'Entertainment', 'Flowers', 'Other'];\n\n  const showToast = useCallback((message, type) => {\n    setToast({ message, type });\n  }, []);\n\n  const refreshPendingList = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/api/vendors/pending`);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch vendors: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      if (Array.isArray(result.data)) {\n        const formatted = result.data.map((vendor) => ({\n          id: vendor.id || vendor._id || '',\n          businessName: vendor.businessName || '',\n          contactName: vendor.personName || '',\n          category: vendor.category || '',\n          email: vendor.email || '',\n          phone: vendor.phone || '',\n          city: vendor.city || '',\n          status: (vendor.status || 'pending').toLowerCase(),\n          createdAt: vendor.createdAt || '',\n          panDocument: vendor.panDocument || null,\n          registrationDocument: vendor.registrationDocument || null,\n          gstDocument: vendor.gstDocument || null,\n        }));\n\n        setVendorRequests(formatted);\n      } else {\n        setVendorRequests([]);\n      }\n    } catch (err) {\n      console.error('Error fetching vendors:', err);\n      setError(err.message);\n      showToast('Failed to load vendor requests', 'error');\n      setVendorRequests([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [showToast]);\n\n  useEffect(() => {\n    refreshPendingList();\n  }, [refreshPendingList]);\n\n  const filterVendors = () => {\n    const searchValue = searchBusiness.toLowerCase();\n\n    return vendorRequests.filter((vendor) => {\n      const fields = [\n        vendor.businessName,\n        vendor.contactName,\n        vendor.email,\n        vendor.city,\n        vendor.phone,\n      ];\n\n      const matchSearch = fields.some((field) => (field || '').toLowerCase().includes(searchValue));\n\n      const matchCategory = selectedCategory === 'All Categories' || vendor.category === selectedCategory;\n      const isPending = vendor.status === 'pending';\n\n      return isPending && matchSearch && matchCategory;\n    });\n  };\n\n  const displayedVendors = filterVendors();\n\n  const handleReset = () => {\n    setSearchBusiness('');\n    setSelectedCategory('All Categories');\n  };\n\n  const handleCreateVendor = () => {\n    navigate('/vendor/create');\n  };\n\n  const handleViewDetails = (vendor) => {\n    navigate('/vendor/request-details', { state: { vendor } });\n  };\n\n  const renderDetailsCell = (vendor) => (\n    <button\n      className=\"btn-view-details\"\n      onClick={() => handleViewDetails(vendor)}\n      title=\"View Details\"\n    >\n      <FiEye size={18} />\n      <span>View Details</span>\n    </button>\n  );\n\n  const handleApprove = (vendor) => {\n    setApproveModal(vendor);\n  };\n\n  const handleReject = (vendor) => {\n    setRejectModal(vendor);\n    setRejectionReason('');\n  };\n\n  const confirmApprove = async () => {\n    if (!approveModal) return;\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/vendors/${approveModal.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ status: 'accepted' }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to accept vendor');\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        setVendorRequests((prev) => prev.filter((v) => v.id !== approveModal.id));\n        showToast('Vendor accepted successfully!', 'success');\n        refreshPendingList();\n      }\n    } catch (err) {\n      console.error('Error accepting vendor:', err);\n      showToast('Failed to accept vendor', 'error');\n    } finally {\n      setApproveModal(null);\n    }\n  };\n\n  const confirmReject = async () => {\n    if (!rejectionReason.trim()) {\n      showToast('Please provide a reason for rejection', 'error');\n      return;\n    }\n\n    if (!rejectModal) return;\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/vendors/${rejectModal.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          status: 'rejected',\n          rejectionReason: rejectionReason.trim(),\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to reject vendor');\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        setVendorRequests((prev) => prev.filter((v) => v.id !== rejectModal.id));\n        showToast('Vendor rejected successfully!', 'success');\n        refreshPendingList();\n      }\n    } catch (err) {\n      console.error('Error rejecting vendor:', err);\n      showToast('Failed to reject vendor', 'error');\n    } finally {\n      setRejectModal(null);\n      setRejectionReason('');\n    }\n  };\n\n  const showToast = (message, type) => {\n    setToast({ message, type });\n  };\n\n  return (\n    <div className=\"vendor-request-container\">\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">\n          <MdStore size={28} />\n          Vendor Requests\n        </h1>\n        <button className=\"create-vendor-btn\" onClick={handleCreateVendor}>\n          <FiPlus size={20} />\n          <span>Create Vendor</span>\n        </button>\n      </div>\n\n      <div className=\"filter-section\">\n        <div className=\"filter-inputs\">\n          <div className=\"filter-group\">\n            <label htmlFor=\"business\" className=\"filter-label\">\n              Business Name\n            </label>\n            <input\n              id=\"business\"\n              type=\"text\"\n              placeholder=\"Search by business name...\"\n              value={searchBusiness}\n              onChange={(e) => setSearchBusiness(e.target.value)}\n              className=\"filter-input\"\n            />\n          </div>\n\n          <div className=\"filter-group\">\n            <label htmlFor=\"category\" className=\"filter-label\">\n              Category\n            </label>\n            <select\n              id=\"category\"\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value)}\n              className=\"filter-select\"\n            >\n              {categories.map((cat) => (\n                <option key={cat} value={cat}>\n                  {cat}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"filter-buttons\">\n            <button className=\"filter-btn reset-btn\" onClick={handleReset}>\n              Reset\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"table-section\">\n        <div className=\"table-title\">\n          Vendor Requests {vendorRequests.length > 0 && `(${vendorRequests.length})`}\n        </div>\n\n        {loading ? (\n          <div className=\"loading-state\">\n            <FiLoader size={40} className=\"spinner\" />\n            <p>Loading vendor requests...</p>\n          </div>\n        ) : error ? (\n          <div className=\"error-state\">\n            <p className=\"error-message\">‚ö†Ô∏è {error}</p>\n            <button className=\"retry-btn\" onClick={() => window.location.reload()}>\n              Retry\n            </button>\n          </div>\n        ) : displayedVendors.length > 0 ? (\n          <div className=\"table-wrapper\">\n            <table className=\"vendor-table\">\n              <thead>\n                <tr>\n                  <th>Business Name</th>\n                  <th>Category</th>\n                  <th>Email</th>\n                  <th>Phone Number</th>\n                  <th>View Details</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {displayedVendors.map((vendor, index) => (\n                  <tr key={vendor.id} className={index % 2 === 0 ? 'even-row' : 'odd-row'}>\n                    <td className=\"td-business\">\n                      <span className=\"business-name\">{vendor.businessName}</span>\n                      <span className=\"business-id\">{vendor.id}</span>\n                      {vendor.contactName && (\n                        <span className=\"business-contact\">Contact: {vendor.contactName}</span>\n                      )}\n                      {vendor.city && <span className=\"business-city\">City: {vendor.city}</span>}\n                    </td>\n                    <td className=\"td-category\">\n                      <span className=\"category-badge\">{vendor.category}</span>\n                    </td>\n                    <td className=\"td-email\">{vendor.email}</td>\n                    <td className=\"td-phone\">{vendor.phone}</td>\n                    <td className=\"td-view\">{renderDetailsCell(vendor)}</td>\n                    <td className=\"td-action-buttons\">\n                      <button\n                        className=\"btn-approve\"\n                        onClick={() => handleApprove(vendor)}\n                        title=\"Approve\"\n                      >\n                        <FiCheck size={18} />\n                      </button>\n                      <button\n                        className=\"btn-reject\"\n                        onClick={() => handleReject(vendor)}\n                        title=\"Reject\"\n                      >\n                        <FiX size={18} />\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          <div className=\"no-data\">\n            <p>üìã No pending vendor requests found</p>\n          </div>\n        )}\n      </div>\n\n      {approveModal && (\n        <div className=\"modal-overlay\" onClick={() => setApproveModal(null)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <h2>Approve Vendor Request</h2>\n            <p>Are you sure you want to approve this Vendor's Request?</p>\n            <div className=\"modal-buttons\">\n              <button className=\"btn-cancel\" onClick={() => setApproveModal(null)}>\n                Cancel\n              </button>\n              <button className=\"btn-confirm\" onClick={confirmApprove}>\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {rejectModal && (\n        <div className=\"modal-overlay\" onClick={() => setRejectModal(null)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <h2>Reject Vendor Request</h2>\n            <p>Are you sure you want to reject this Vendor's Request?</p>\n            <div className=\"form-group\">\n              <label htmlFor=\"reason\" className=\"form-label\">\n                Reason for Rejection <span className=\"required\">*</span>\n              </label>\n              <textarea\n                id=\"reason\"\n                value={rejectionReason}\n                onChange={(e) => setRejectionReason(e.target.value)}\n                placeholder=\"Enter reason for rejection...\"\n                className=\"textarea-input\"\n                rows=\"4\"\n              />\n            </div>\n            <div className=\"modal-buttons\">\n              <button className=\"btn-cancel\" onClick={() => setRejectModal(null)}>\n                Cancel\n              </button>\n              <button className=\"btn-reject-confirm\" onClick={confirmReject}>\n                Confirm Rejection\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {toast && (\n        <Toast\n          message={toast.message}\n          type={toast.type}\n          onClose={() => setToast(null)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default VendorRequest;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"c:\\Users\\bhuva\\OneDrive\\Desktop\\catalyst\\my-react-app\\src\\pages\\Vendor\\VendorRequestDetails.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]